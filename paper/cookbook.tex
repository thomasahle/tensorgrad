\documentclass[oneside]{book}
\usepackage{ifthen}
\usepackage{lipsum} % for generating dummy text
\usepackage{xparse}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{placeins}
\usepackage[T1]{fontenc}
\usepackage[]{hyperref}
\usepackage{import}
\usepackage{graphicx}
\usepackage{adjustbox}
\usepackage{changepage} % for adjustwidth
\usepackage{listings}
\usepackage{xcolor}

\usepackage{geometry}
\geometry{hmargin=4cm,vmargin=4cm}

\allowdisplaybreaks

\usepackage{tikz}
\input{chapters/tikz-styles.tex}
\input{chapters/tikz-macros.tex}

% https://tex.stackexchange.com/a/398211/24956
\usepackage{environ}
\NewEnviron{walign}{%
  \noindent
  \begin{adjustwidth}{-1em}{-1em}
  \begin{align*}
    \BODY
  \end{align*}
  \end{adjustwidth}
}

\newcommand{\vflip}[1]{%
  \ifmmode
    \rotatebox[origin=c]{180}{$#1$}%
  \else
    \rotatebox[origin=c]{180}{#1}%
  \fi
}

\lstset{
  language=Python,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{blue},
  commentstyle=\color{gray},
  stringstyle=\color{red},
  showstringspaces=false,
  numbers=left,
  numberstyle=\tiny\color{gray},
  breaklines=true,
  frame=single,
  captionpos=b,
  tabsize=2,
}


\newtheoremstyle{normalstyle} % Name of the style
  {3pt}   % Space above
  {3pt}   % Space below
  {\normalfont}  % Body font
  {}      % Indent amount
  {\bfseries} % Theorem head font
  {.}     % Punctuation after theorem head
  { }     % Space after theorem head
  {}      % Theorem head spec
\theoremstyle{normalstyle}
\newtheorem{exercise}{Exercise}

\newcommand{\smat}[1]{\left[\begin{smallmatrix}#1\end{smallmatrix}\right]}
\newcommand{\svec}[1]{[\begin{smallmatrix}#1\end{smallmatrix}]}
\newcommand{\E}{\mathrm{E}}
\newcommand\sbullet[1][1.5pt]{%
  \tikz[baseline=-0.5ex]\draw (0,0) circle (#1);%
}
\newcommand{\R}{\mathbb R}
\newcommand{\eps}{\varepsilon}


\title{The Tensor Cookbook}
\author{Thomas Dybdahl Ahle}
\begin{document}

% Consider also taking some inspiration from https://arxiv.org/pdf/1802.01528
% "The Matrix Calculus You Need For Deep Learning"

\maketitle

%\input{chapters/intro.tex}
\input{chapters/simple_derivatives.tex}
%\input{chapters/kronecker.tex}
\input{chapters/functions.tex}
%\input{chapters/statistics.tex}

%\input{chapters/determinant.tex}
%\input{chapters/advanced_derivatives.tex}
%\input{chapters/special_matrices.tex}
%\input{chapters/decompositions.tex}
%\input{chapters/ml.tex}
%\input{chapters/tensor_algos.tex}
%\input{chapters/tensorgrad.tex}

\bibliographystyle{plain}
\bibliography{references}

\input{chapters/appendix.tex}

\end{document}
